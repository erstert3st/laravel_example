services:
  grafana:
    image: grafana/grafana:latest # ubuntu provising is broken Grafana v12.2.0-16636675413 (8729ea2dba) works
    container_name: grafana
    restart: on-failure
    environment:
      - PUID=1001
      - PGID=1001
      - TZ=Etc/UTC
    command:
      - --config=/etc/grafana-config/grafana.ini
    volumes:
      - ./config/grafana/config:/etc/grafana-config
      - ./config/grafana/datasources:/etc/grafana/provisioning/datasources
      - ./config/grafana/dashboards:/etc/grafana/provisioning/dashboards
    develop:
      watch:
        - path: ./config/grafana/config
          action: restart
        - path: ./config/grafana/dashboards/provisioning.yaml
          action: restart
    ports:
      - "3000:3000"
    networks:
      - website-network 
    healthcheck:
      test: [ "CMD", "curl", "-f", "http://localhost:3000/healthz" ]
      interval: 1s
      start_period: 5s
      timeout: 10s
      retries: 5


    # environment:
      # - GF_GIT_DASHBOARDS_ENABLED=true
      # - GF_GIT_DASHBOARDS_REPO_URL=https://github.com/erstert3st/laravel_example.git
      # - GF_GIT_DASHBOARDS_BRANCH=master
      # - GF_GIT_DASHBOARDS_PATH=dashboards
      # - GF_GIT_DASHBOARDS_USERNAME=erstert3st
      #- GF_GIT_DASHBOARDS_TOKEN=youraccesstoken
      #- GF_GIT_DASHBOARDS_UPDATE_INTERVAL_SECONDS=300

  # Variable	Description	Default value
  # CITY_DB_FILE	The location of the GeoIP2 City or GeoLite2 database file.	/srv/GeoLite2-City.mmdb
  # ASN_DB_FILE	The location of the GeoIP2 ASN database file.	/srv/GeoLite2-ASN.mmdb
  # ISP_DB_FILE	The location of the GeoIP2 ISP database file.	